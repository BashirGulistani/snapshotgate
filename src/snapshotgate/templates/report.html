<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SnapshotGate Report</title>

  <style>
    :root { --bg:#0b0b0d; --card:#121218; --muted:#a7a7b3; --text:#f2f2f5; --line:rgba(255,255,255,.10); --ok:#4ade80; --bad:#fb7185; --warn:#fbbf24; }
    body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; background: radial-gradient(1200px 700px at 15% 10%, rgba(255,255,255,.08), transparent 55%), var(--bg); color:var(--text); }
    .wrap { max-width: 1120px; margin: 0 auto; padding: 22px 18px 48px; }
    h1 { margin:0; font-size: 20px; letter-spacing: -0.02em; }
    .sub { color: var(--muted); font-size: 13px; margin-top: 6px; line-height:1.35; }
    .row { display:flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }
    .card { flex:1; min-width: 220px; background: rgba(255,255,255,.04); border: 1px solid var(--line); border-radius: 14px; padding: 12px 12px; }
    .k { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .06em; }
    .v { font-size: 16px; font-weight: 800; margin-top: 6px; }
    .badge { display:inline-flex; align-items:center; gap:8px; padding: 7px 10px; border-radius: 999px; border: 1px solid var(--line); background: rgba(255,255,255,.03); font-size: 12px; }
    .dot { width: 10px; height: 10px; border-radius: 999px; background: rgba(255,255,255,.35); }
    .dot.ok { background: var(--ok); }
    .dot.bad { background: var(--bad); }
    pre { margin: 10px 0 0; white-space: pre-wrap; word-break: break-word; background: rgba(255,255,255,.03); border: 1px solid var(--line); padding: 10px; border-radius: 12px; }
    table { width:100%; border-collapse: collapse; margin-top: 14px; background: rgba(255,255,255,.03); border: 1px solid var(--line); border-radius: 14px; overflow:hidden; }
    th, td { padding: 10px; border-bottom: 1px solid var(--line); font-size: 13px; vertical-align: top; }
    th { text-align:left; color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: .06em; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }


  </style>
</head>
<body>
  <div class="wrap">
    <h1>SnapshotGate Report</h1>
    <div class="sub" id="meta"></div>

    <div class="row">
      <div class="card">
        <div class="k">Result</div>
        <div class="v" id="result"></div>
      </div>
      <div class="card">
        <div class="k">Row Count</div>
        <div class="v mono" id="rows"></div>
      </div>
      <div class="card">
        <div class="k">Missing Columns</div>
        <div class="v mono" id="missing"></div>
      </div>
      <div class="card">
        <div class="k">New Columns</div>
        <div class="v mono" id="added"></div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="k">Fail reasons</div>
      <pre class="mono" id="reasons"></pre>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="k">Type changes</div>
      <pre class="mono" id="types"></pre>
    </div>

    <h2 style="margin-top:18px; font-size:16px;">Per-column drift</h2>
    <table>
      <thead>
        <tr>
          <th style="width:220px;">Column</th>
          <th>Violations</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <script>
    const DATA = {{__DATA__}};
    const v = DATA.validation;
    const s = v.summary;

    const meta = document.getElementById("meta");
    const result = document.getElementById("result");
    const rows = document.getElementById("rows");
    const missing = document.getElementById("missing");
    const added = document.getElementById("added");
    const reasons = document.getElementById("reasons");
    const types = document.getElementById("types");
    const tbody = document.getElementById("tbody");


    meta.textContent = `${DATA.contract.baseline.source}  â†’  ${DATA.new_profile.source}`;

    result.innerHTML = v.ok
      ? `<span class="badge"><span class="dot ok"></span>PASS</span>`
      : `<span class="badge"><span class="dot bad"></span>FAIL</span>`;



